#!/bin/bash

version=$(vboxmanage -version | grep -Po '(\d+\.\d+\.\d+)')
ga_url="https://download.virtualbox.org/virtualbox/$version/VBoxGuestAdditions_$version.iso"
ga_iso="VBoxGuestAdditions.iso"
win10_url="https://go.microsoft.com/fwlink/p/?LinkID=2208844&clcid=0x409&culture=en-us&country=US"
win10_iso="WIN10_CLIENT_EVAL_x64_en-us.iso"
debian_url="https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/debian-12.6.0-amd64-netinst.iso"
debian_iso="debian-12.6.0-amd64-netinst.iso"

printf "$win10_url $win10_iso\n$debian_url $debian_iso\n$ga_url $ga_iso\n" |
    xargs -P 3 -n2 sh -c 'echo "Downloading: $1 ($0)"; if [[ -f ISO/$1 ]]; then echo "Skipping: $1"; else wget -q "$0" -O "ISO/.$1.tmp" && mv "ISO/.$1.tmp" "ISO/$1"; echo "Finished: $1!"; fi'


